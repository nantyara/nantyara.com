---
import Layout from '../layouts/Layout.astro';
import { readFileSync } from 'node:fs';
import { parse } from 'yaml';

const linksYaml = readFileSync('src/data/links.yml', 'utf-8');
const links = parse(linksYaml);

const categories: Record<string, string> = {
  social: 'SNS',
  streaming: '音楽配信',
  video: '動画',
  store: 'グッズ',
  related: '関連サイト',
};
---

<Layout title="リンク | なんちゃらアイドル">
  {Object.entries(categories).map(([key, label]) => {
    const categoryLinks = links[key];
    if (!categoryLinks || categoryLinks.length === 0) return null;

    return (
      <div class="link-category">
        <h2 class="category-title">{label}</h2>
        <div class="link-items">
          {categoryLinks.map((link: any) => (
            <div class="item link-item">
              <a href={link.url} target="_blank" rel="noopener noreferrer">
                {link.name}
              </a>
            </div>
          ))}
        </div>
      </div>
    );
  })}
</Layout>

<style>
  .link-category {
    width: 100%;
    margin-bottom: 30px;
  }

  .category-title {
    color: #f0f8ff;
    text-shadow: 1px -1px 0 pink;
    text-align: center;
    font-size: 1.5rem;
    margin: 20px 0;
  }

  .link-items {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 10px;
    padding: 10px;
  }

  .link-item {
    width: auto;
    min-width: 200px;
    padding: 0;
  }

  .link-item a {
    display: block;
    padding: 15px;
    text-decoration: none;
    color: #333;
    font-weight: bold;
  }

  .link-item a:hover {
    background: #ddd;
  }
</style>
