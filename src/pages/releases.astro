---
import Layout from '../layouts/Layout.astro';
import ReleaseCard from '../components/ReleaseCard.astro';
import { readFileSync } from 'node:fs';
import { parse } from 'yaml';

const releasesYaml = readFileSync('src/data/releases.yml', 'utf-8');
const releases = parse(releasesYaml);

// リリース日が新しい順にソート
const sortedReleases = releases.sort((a: any, b: any) =>
  new Date(b.release_date).getTime() - new Date(a.release_date).getTime()
);
---

<Layout title="音源 | なんちゃらアイドル">
  <div class="releases-container">
    {sortedReleases.map((release: any) => (
      <ReleaseCard {...release} />
    ))}
  </div>
</Layout>

<style>
  .releases-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 30px;
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto;
  }

  @media (max-width: 768px) {
    .releases-container {
      gap: 20px;
      padding: 15px;
    }
  }

  @media (max-width: 480px) {
    .releases-container {
      gap: 15px;
      padding: 10px;
    }
  }
</style>
